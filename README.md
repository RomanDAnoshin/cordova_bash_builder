# Запуск
1. Открыть терминал и ввести:
```
bash builder_apk.sh расположение_кода имя_приложения пакет_приложения версия расположение_файлов_плагина_фейсбук_на_замену расположение_исходников_заглушки расположение_мипмапов расположение_папки_под_ключ расположение_папки_под_апк
```
2. Дождаться завершения выполнения. Ключ и апк будут находиться в местах, которые вы указали.

# Пример запуска
1. Открываем терминал и вводим:
```
bash builder_apk.sh /home/user/workspace/cordova/mobile_cordova_anoshin_9 "Huba Buba" com.supergamedev.hubabuba 145 /home/user/workspace/cordova/plugins/fb /home/user/workspace/www /home/user/workspace/mipmaps /home/user/workspace/cordova/keys /home/user/workspace/cordova/apk
```
2. Дожидаемся, когда терминал снова предложит что-то ввести, а последней строкой будет надпись "Подпись апк ЗАВЕРШЕНА".
Апк можно забрать в /home/user/workspace/cordova/apk, ключ в /home/user/workspace/cordova/keys.

# Схема работы скрипта
1. Перейти в папку проекта.
2. Обработать config файл.
3. Переустановить платформу.
4. Заменить код фейсбук.
5. Заменить юрл-схему.
6. Добавить заглушку.
7. Добавить мипмапы.
8. Собрать проект.
9. Создать ключ.
10. Подписать апк.

# Теория
Bash - это язык командной строки Linux. 
(вроде есть возможность запустить на MacOS и Windows 10, но не сам не проверял)

Сценарий Bash - это файл с построчно написанными командами для консоли. Команды выполняются последовательно, одна после выполнения другой.

**Все, что вы можете запустить в командной строке, можно поместить в файл сценария, и там это будет работать точно так же. И наоборот, что вы помещаете в сценарий, вы также можете запустить в командной строке, и это будет работать ровно так же.**

Не забываем, что т.к. это всё пишется для выполнения в консоли, то пробел в строке является разделителем.

# Техническое пояснение команд скрипта
1. Перейти в папку проекта.
```
echo "Старт" - вывод строки в консоль
cd $1 - перевод рабочей области терминала в путь, который указан первым аргументом при вызове скрипта
```

2. Обработать config файл.
```
sed -n '3p' < config.xml - вывод третьей строки из файла config.xml
"$(команда)" - сохранение вывода команды в строку для записи потом в переменную
"${переменная//текст}" - удаление текста из строки, содержащегося в переменной
sed -i "s/искомый_текст/текст_на_замену/" "config.xml" - замена текста в файле config.xml.
($str) - разбиение строки с пробелами на массив в местах пробелов
${array[1]} - вывод элемента массива
${строка:индекс:длина} - обрезание строки

```

4. Заменить код фейсбук.
```
cp -vf копируемый_файл дубликат - копирование файла с заменой (ключик -f). ключи: -v - отчитываться за выполнение команды в строку, -f компирование с силой (заменяет файл)
```

6. Добавить заглушку.
```
mv исходное_имя_файла итоговое_имя_файла - переимпеновать файл
```

7. Добавить мипмапы.
```
cp -vrf папка_откуда_компировать_содержимое/. куда_вставлять_содержимое - копирование содержимого папки с заменой (ключик -f)
```

# Полезные ссылки
Совсем основы: 
* https://ryanstutorials.net/bash-scripting-tutorial/

Сайты с кучей полезных примеров:
* https://linuxhint.com/remove_characters_string_bash/
* https://www.cyberciti.biz/faq/how-to-extract-substring-in-bash/
* https://tldp.org/LDP/abs/html/string-manipulation.html

Стаковерфлоу по линукс:
* https://askubuntu.com/
* https://unix.stackexchange.com/
